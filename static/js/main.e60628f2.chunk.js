(this["webpackJsonpdochoikidworld-server"]=this["webpackJsonpdochoikidworld-server"]||[]).push([[0],{170:function(n,t,e){"use strict";e.r(t);var o=e(82),c=e.n(o),i=e(167),r=e(168),a=e(169),u=e(172).default,s=e(190)(),l=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||5e3;s.listen(l,(function(){return console.log("Listening on port ".concat(l))}));var d=function(){function n(){Object(r.a)(this,n)}return Object(a.a)(n,[{key:"authen",value:function(n){var t=this;u.post("/connect/token","scopes=PublicApi.Access&grant_type=client_credentials&client_id=7bc72ce2-8680-41d6-ac3d-253cdd1eacb2&client_secret=AD38790F89BE9C5A9EC9411F8EC73B1E89F3EA3A",{headers:{"Content-Type":"application/x-www-form-urlencoded"},baseURL:"https://id.kiotviet.vn"}).then((function(n){console.log("respnose",n.data),t.token=n.data.access_token})).catch((function(n){console.log("eerrr",n)})).then((function(){console.log("always call"),n()}))}},{key:"getProducts",value:function(n){return console.log("call api with page: ",n),u.get("/products",{headers:{Retailer:"dochoikidworld",Authorization:"Bearer "+this.token},params:{pageSize:100,currentItem:null!==n&&void 0!==n?n:0,includeInventory:!0},baseURL:"https://public.kiotapi.com"})}},{key:"getAllSellingProducts",value:function(){var n=Object(i.a)(c.a.mark((function n(t){var e,o,i,r,a,u;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=[],o=1,i=100;case 3:if(!(e.length<=i)){n.next=13;break}return n.next=6,this.getProducts(o);case 6:a=n.sent,null!=(u=a.data.data)&&(e=e.concat(u)),i=null!==(r=a.data.total)&&void 0!==r?r:10,o+=1,n.next=3;break;case 13:console.log("done with result"),e=e.filter((function(n){return n.inventories[0].onHand>0})),t(e);case 16:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()}]),n}();d.instance=new d,s.get("/products",(function(n,t){d.instance.token,d.instance.authen((function(){d.instance.getAllSellingProducts((function(n){t.send(n)}))}))}))},216:function(n,t){},217:function(n,t){},221:function(n,t){},223:function(n,t){},262:function(n,t){},265:function(n,t){function e(n){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=265},277:function(n,t){},279:function(n,t){},307:function(n,t){},308:function(n,t){},313:function(n,t){},315:function(n,t){},322:function(n,t){},341:function(n,t){}},[[170,1,2]]]);
//# sourceMappingURL=main.e60628f2.chunk.js.map